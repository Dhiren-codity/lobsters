<%= render partial: @above if @above %>

<ol class="comments comments1">
  <% this_page(@comments).each do |comment| %>
    <li><%= render "comments/comment", :comment => comment,
      :show_story => true %>
      <ol class="comments"></ol>
    </li>
  <% end %>
</ol>

<% if @page %>
<div class="morelink">
  <% if @comments.any? %>
    <% if @page && @page > 1 %>
      <%= link_to raw("&lt;&lt; Page #{@page - 1}"), { controller: controller_name, action: action_name, page: @page - 1 } %>
    <% end %>

    <% if @page && @page > 1 %>
      |
    <% end %>
    <%= link_to raw("Page #{@page + 1} &gt;&gt;"), { controller: controller_name, action: action_name, page: @page + 1 } %>
  <% end %>
</div>
<% else %>
  <% if has_next_page(@comments) %>
    <%= link_to "Next page", { after: @comments.second_to_last.short_id } %>
  <% end %>
<% end %>
